{% extends "base.html" %}

{% block title %}–õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π - System Info Collector{% endblock %}
{% block page_title %}üìã –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π{% endblock %}

{% block content %}
<div class="stat-card">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4><i class="fas fa-clipboard-list me-2"></i>–ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π</h4>
        <span class="badge bg-primary">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 –∑–∞–ø–∏—Å–µ–π</span>
    </div>

    {% if logs %}
    <div class="table-responsive">
        <table class="table table-striped table-sm">
            <thead>
                <tr>
                    <th>–í—Ä–µ–º—è</th>
                    <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                    <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                    <th>–î–µ—Ç–∞–ª–∏</th>
                    <th>IP –∞–¥—Ä–µ—Å</th>
                </tr>
            </thead>
            <tbody>
                {% for log in logs %}
                <tr>
                    <td>
                        <small>{{ log.timestamp[:16] }}</small>
                    </td>
                    <td>
                        {% if log.user_id %}
                        <strong>{{ log.username }}</strong>
                        {% else %}
                        <span class="text-muted">{{ log.username or '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ' }}</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if log.action == 'login' %}
                        <span class="badge bg-success">–í—Ö–æ–¥</span>
                        {% elif log.action == 'logout' %}
                        <span class="badge bg-secondary">–í—ã—Ö–æ–¥</span>
                        {% elif log.action == 'login_failed' %}
                        <span class="badge bg-danger">–ù–µ—É–¥–∞—á–Ω—ã–π –≤—Ö–æ–¥</span>
                        {% elif 'download' in log.action %}
                        <span class="badge bg-info">–°–∫–∞—á–∏–≤–∞–Ω–∏–µ</span>
                        {% elif 'view' in log.action %}
                        <span class="badge bg-primary">–ü—Ä–æ—Å–º–æ—Ç—Ä</span>
                        {% elif 'create' in log.action or 'delete' in log.action or 'restore' in log.action %}
                        <span class="badge bg-warning">–ò–∑–º–µ–Ω–µ–Ω–∏–µ</span>
                        {% else %}
                        <span class="badge bg-dark">{{ log.action }}</span>
                        {% endif %}
                    </td>
                    <td>
                        <small>{{ log.details }}</small>
                    </td>
                    <td>
                        <code class="small">{{ log.ip_address }}</code>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="text-center py-5">
        <i class="fas fa-clipboard-list fa-3x text-muted mb-3"></i>
        <h5 class="text-muted">–õ–æ–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h5>
        <p class="text-muted">–î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –µ—â–µ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å.</p>
    </div>
    {% endif %}
</div>

<div class="stat-card mt-4">
    <h5><i class="fas fa-info-circle me-2"></i>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ª–æ–≥–∞—Ö</h5>
    <div class="row mt-3">
        <div class="col-md-6">
            <ul class="list-unstyled">
                <li><i class="fas fa-check-circle text-success me-2"></i>–õ–æ–≥–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</li>
                <li><i class="fas fa-eye text-primary me-2"></i>–ó–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–æ—Å–º–æ—Ç—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü</li>
                <li><i class="fas fa-download text-info me-2"></i>–§–∏–∫—Å–∏—Ä—É—é—Ç—Å—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤</li>
            </ul>
        </div>
        <div class="col-md-6">
            <ul class="list-unstyled">
                <li><i class="fas fa-user-plus text-warning me-2"></i>–û—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</li>
                <li><i class="fas fa-trash text-danger me-2"></i>–õ–æ–≥–∏—Ä—É—é—Ç—Å—è —É–¥–∞–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤</li>
                <li><i class="fas fa-history text-secondary me-2"></i>–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è 100 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}